<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Fisheriescape vignette • fisheriescape</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Fisheriescape vignette">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">fisheriescape</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/fisheriescape_vignette.html">Fisheriescape vignette</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/JoleneSutton/fisheriescape/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Fisheriescape vignette</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/JoleneSutton/fisheriescape/blob/main/vignettes/fisheriescape_vignette.Rmd" class="external-link"><code>vignettes/fisheriescape_vignette.Rmd</code></a></small>
      <div class="d-none name"><code>fisheriescape_vignette.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/JoleneSutton/fisheriescape" class="external-link">fisheriescape</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/JoleneSutton/gslSpatial" class="external-link">gslSpatial</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/" class="external-link">terra</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dieghernan.github.io/tidyterra/" class="external-link">tidyterra</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="load-example-files-and-a-10-x-10-km2-hexagonal-grid">Load example files and a 10 x 10 km2 hexagonal grid<a class="anchor" aria-label="anchor" href="#load-example-files-and-a-10-x-10-km2-hexagonal-grid"></a>
</h2>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span><span class="op">&lt;-</span><span class="va">crab</span></span>
<span><span class="va">fa.poly</span><span class="op">&lt;-</span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/vect.html" class="external-link">vect</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/sample.fa.poly.shp"</span>, package<span class="op">=</span><span class="st">"fisheriescape"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">grid</span><span class="op">&lt;-</span><span class="fu">gslSpatial</span><span class="fu">::</span><span class="fu"><a href="https://jolenesutton.github.io/gslSpatial/reference/get_shapefile.html" class="external-link">get_shapefile</a></span><span class="op">(</span><span class="st">'hex'</span><span class="op">)</span></span>
<span><span class="co">#&gt; 10 x 10 km hex grid</span></span>
<span><span class="va">grid</span><span class="op">&lt;-</span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/crop.html" class="external-link">crop</a></span><span class="op">(</span><span class="va">grid</span>,<span class="fu"><a href="https://rspatial.github.io/terra/reference/ext.html" class="external-link">ext</a></span><span class="op">(</span><span class="va">fa.poly</span><span class="op">)</span><span class="op">*</span><span class="fl">1.05</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="site-score">Site score<a class="anchor" aria-label="anchor" href="#site-score"></a>
</h2>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df.ss</span><span class="op">&lt;-</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct_all.html" class="external-link">distinct_at</a></span><span class="op">(</span><span class="va">df</span>,<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="st">'event.id'</span><span class="op">)</span>,.keep_all <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span>
<span><span class="va">df.ss</span><span class="op">&lt;-</span><span class="va">df.ss</span><span class="op">[</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">df.ss</span><span class="op">$</span><span class="va">x</span><span class="op">)</span><span class="op">|</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">df.ss</span><span class="op">$</span><span class="va">y</span><span class="op">)</span><span class="op">)</span>,<span class="op">]</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://dieghernan.github.io/tidyterra/reference/ggspatvector.html" class="external-link">geom_spatvector</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">fa.poly</span>,fill<span class="op">=</span><span class="st">'white'</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://dieghernan.github.io/tidyterra/reference/ggspatvector.html" class="external-link">geom_spatvector</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">grid</span>,fill<span class="op">=</span><span class="cn">NA</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">df.ss</span>,<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">x</span>,<span class="va">y</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="fisheriescape_vignette_files/figure-html/unnamed-chunk-3-1.png" width="700"></p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">ss</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">suppressMessages</a></span><span class="op">(</span><span class="fu"><a href="../reference/fs_site_score.html">fs_site_score</a></span><span class="op">(</span><span class="va">df.ss</span>,<span class="va">fa.poly</span>,grid<span class="op">=</span><span class="va">grid</span><span class="op">)</span><span class="op">)</span><span class="co"># be patient</span></span>
<span><span class="co">#&gt; Processing points 1 to 1000. 14:49:48</span></span>
<span><span class="co">#&gt; Processing points 1001 to 2000. 14:49:48</span></span>
<span><span class="co">#&gt; Processing points 2001 to 3000. 14:49:49</span></span>
<span><span class="co">#&gt; Processing points 3001 to 4000. 14:49:49</span></span>
<span><span class="co">#&gt; Processing points 4001 to 5000. 14:49:49</span></span>
<span><span class="co">#&gt; Processing points 5001 to 6000. 14:49:49</span></span>
<span><span class="co">#&gt; Processing points 6001 to 7000. 14:49:49</span></span>
<span><span class="co">#&gt; Processing points 7001 to 8000. 14:49:49</span></span>
<span><span class="co">#&gt; Processing points 8001 to 9000. 14:49:49</span></span>
<span><span class="co">#&gt; Processing points 9001 to 10000. 14:49:49</span></span>
<span><span class="co">#&gt; Processing points 10001 to 11000. 14:49:49</span></span>
<span><span class="co">#&gt; Processing points 11001 to 12000. 14:49:49</span></span>
<span><span class="co">#&gt; Processing points 12001 to 13000. 14:49:49</span></span>
<span><span class="co">#&gt; Processing points 13001 to 14000. 14:49:49</span></span>
<span><span class="co">#&gt; Processing points 14001 to 15000. 14:49:49</span></span>
<span><span class="co">#&gt; Processing points 15001 to 16000. 14:49:49</span></span>
<span><span class="co">#&gt; Processing points 16001 to 17000. 14:49:49</span></span>
<span><span class="co">#&gt; Processing points 17001 to 18000. 14:49:49</span></span>
<span><span class="co">#&gt; Processing points 18001 to 19000. 14:49:49</span></span>
<span><span class="co">#&gt; Processing points 19001 to 20000. 14:49:49</span></span>
<span><span class="co">#&gt; Processing points 20001 to 21000. 14:49:49</span></span>
<span><span class="co">#&gt; Processing points 21001 to 22000. 14:49:49</span></span>
<span><span class="co">#&gt; Processing points 22001 to 23000. 14:49:49</span></span>
<span><span class="co">#&gt; Processing points 23001 to 24000. 14:49:49</span></span>
<span><span class="co">#&gt; Processing points 24001 to 25000. 14:49:49</span></span>
<span><span class="co">#&gt; Processing points 25001 to 26000. 14:49:50</span></span>
<span><span class="co">#&gt; Processing points 26001 to 27000. 14:49:50</span></span>
<span><span class="co">#&gt; Processing points 27001 to 28000. 14:49:50</span></span>
<span><span class="co">#&gt; Processing points 28001 to 29000. 14:49:50</span></span>
<span><span class="co">#&gt; Processing points 29001 to 30000. 14:49:50</span></span>
<span><span class="co">#&gt; Processing points 30001 to 31000. 14:49:50</span></span>
<span><span class="co">#&gt; Processing points 31001 to 32000. 14:49:50</span></span>
<span><span class="co">#&gt; Processing points 32001 to 33000. 14:49:50</span></span>
<span><span class="co">#&gt; Processing points 33001 to 34000. 14:49:50</span></span>
<span><span class="co">#&gt; Processing points 34001 to 35000. 14:49:50</span></span>
<span><span class="co">#&gt; Processing points 35001 to 36000. 14:49:50</span></span>
<span><span class="co">#&gt; Processing points 36001 to 37000. 14:49:50</span></span>
<span><span class="co">#&gt; Processing points 37001 to 38000. 14:49:50</span></span>
<span><span class="co">#&gt; Processing points 38001 to 39000. 14:49:50</span></span>
<span><span class="co">#&gt; Processing points 39001 to 39292. 14:49:50</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">ss</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 7</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Groups:   fleet, sw [5]</span></span></span>
<span><span class="co">#&gt;   GRID_ID  sw    tot.count.hex av.count.hex fleet sum.av.count.fleet</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> ATW-1161 19                1          0.2 <span style="color: #BB0000;">NA</span>                    <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> ATW-1161 20                2          0.4 <span style="color: #BB0000;">NA</span>                    <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> ATW-1161 21                2          0.4 <span style="color: #BB0000;">NA</span>                    <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> ATX-1161 21                1          0.2 <span style="color: #BB0000;">NA</span>                    <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> ATY-1137 15                1          0.2 <span style="color: #BB0000;">NA</span>                    <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> ATY-1143 13                1          0.2 <span style="color: #BB0000;">NA</span>                    <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 1 more variable: prop.count.fleet &lt;dbl&gt;</span></span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">ss</span><span class="op">)</span></span>
<span><span class="co">#&gt;    GRID_ID               sw            tot.count.hex     av.count.hex   </span></span>
<span><span class="co">#&gt;  Length:16202       Length:16202       Min.   : 1.000   Min.   : 0.200  </span></span>
<span><span class="co">#&gt;  Class :character   Class :character   1st Qu.: 1.000   1st Qu.: 0.200  </span></span>
<span><span class="co">#&gt;  Mode  :character   Mode  :character   Median : 2.000   Median : 0.400  </span></span>
<span><span class="co">#&gt;                                        Mean   : 2.425   Mean   : 0.485  </span></span>
<span><span class="co">#&gt;                                        3rd Qu.: 3.000   3rd Qu.: 0.600  </span></span>
<span><span class="co">#&gt;                                        Max.   :58.000   Max.   :11.600  </span></span>
<span><span class="co">#&gt;                                                                         </span></span>
<span><span class="co">#&gt;     fleet           sum.av.count.fleet prop.count.fleet  </span></span>
<span><span class="co">#&gt;  Length:16202       Min.   :  0.2      Min.   :0.000301  </span></span>
<span><span class="co">#&gt;  Class :character   1st Qu.:141.0      1st Qu.:0.000602  </span></span>
<span><span class="co">#&gt;  Mode  :character   Median :454.0      Median :0.001171  </span></span>
<span><span class="co">#&gt;                     Mean   :374.7      Mean   :0.005595  </span></span>
<span><span class="co">#&gt;                     3rd Qu.:512.6      3rd Qu.:0.002736  </span></span>
<span><span class="co">#&gt;                     Max.   :664.6      Max.   :1.000000  </span></span>
<span><span class="co">#&gt;                     NA's   :117        NA's   :117</span></span>
<span></span>
<span><span class="va">index</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">grid</span><span class="op">$</span><span class="va">GRID_ID</span><span class="op"><a href="https://rspatial.github.io/terra/reference/match.html" class="external-link">%in%</a></span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="va">ss</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">ss</span><span class="op">$</span><span class="va">sum.av.count.fleet</span><span class="op">)</span><span class="op">)</span>,<span class="st">'GRID_ID'</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://dieghernan.github.io/tidyterra/reference/ggspatvector.html" class="external-link">geom_spatvector</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">fa.poly</span>,fill<span class="op">=</span><span class="st">'white'</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://dieghernan.github.io/tidyterra/reference/ggspatvector.html" class="external-link">geom_spatvector</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">grid</span>,fill<span class="op">=</span><span class="cn">NA</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://dieghernan.github.io/tidyterra/reference/ggspatvector.html" class="external-link">geom_spatvector</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">grid</span><span class="op">[</span><span class="va">index</span>,<span class="op">]</span>,fill<span class="op">=</span><span class="st">'red'</span><span class="op">)</span><span class="co">#+geom_point(data=df.ss,aes(x,y))</span></span></code></pre></div>
<p><img src="fisheriescape_vignette_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># red hexes had data points, but they fall outside of the fa.poly, and so are not included in the site score calculations</span></span>
<span></span>
<span><span class="va">ss</span><span class="op">&lt;-</span><span class="va">ss</span><span class="op">[</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">ss</span><span class="op">$</span><span class="va">prop.count.fleet</span><span class="op">)</span><span class="op">)</span>,<span class="op">]</span></span>
<span><span class="va">ss</span><span class="op">$</span><span class="va">site.score</span><span class="op">&lt;-</span><span class="va">ss</span><span class="op">$</span><span class="va">prop.count.fleet</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="pivot-tables">Pivot tables<a class="anchor" aria-label="anchor" href="#pivot-tables"></a>
</h2>
<div class="section level3">
<h3 id="select-distinct-rows">Select distinct rows<a class="anchor" aria-label="anchor" href="#select-distinct-rows"></a>
</h3>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df2</span><span class="op">&lt;-</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct_all.html" class="external-link">distinct_at</a></span><span class="op">(</span><span class="va">df</span>,<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="st">'event.id'</span>,<span class="st">'fleet'</span>,<span class="st">'cfv'</span>,<span class="st">'dateland'</span>,<span class="st">'ctchdate'</span>,</span>
<span>                           <span class="st">'gear.amount'</span>,</span>
<span>                           <span class="st">'hours.fished'</span><span class="op">)</span>,.keep_all <span class="op">=</span> <span class="cn">T</span><span class="op">)</span> </span>
<span></span>
<span><span class="va">df2</span><span class="op">&lt;-</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/factors.html" class="external-link">droplevels</a></span><span class="op">(</span><span class="va">df2</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">df2</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "event.id"     "trip.id"      "cfv"          "dateland"     "ctchdate"    </span></span>
<span><span class="co">#&gt;  [6] "latitude"     "longitude"    "year"         "sw"           "x"           </span></span>
<span><span class="co">#&gt; [11] "y"            "fleet"        "gear.amount"  "hours.fished"</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/dimensions.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">df2</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 41154</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="pivot-1">Pivot 1<a class="anchor" aria-label="anchor" href="#pivot-1"></a>
</h3>
<p>Function <code>fs_pivot1</code> summarizes data by variables trip.id
and fleet. The resulting table contains the summed gear, maximum hours
(if applicable), and mean days (if applicable).</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pivot1</span><span class="op">&lt;-</span><span class="fu"><a href="../reference/fs_pivot1.html">fs_pivot1</a></span><span class="op">(</span><span class="va">df2</span>,</span>
<span>      keep.cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'cfv'</span>,<span class="st">'year'</span>,<span class="st">'sw'</span><span class="op">)</span>,</span>
<span>       gear.col<span class="op">=</span><span class="st">'gear.amount'</span>,</span>
<span>       hour.col<span class="op">=</span><span class="st">'hours.fished'</span><span class="op">)</span></span>
<span><span class="va">pivot1</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 32,302 × 7</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Groups:   trip.id, fleet [32,302]</span></span></span>
<span><span class="co">#&gt;    trip.id                         fleet  cfv[,1]  year sw    sum.gear max.hours</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> k6!ffg;2016-05-07;2016-05-07    GQ_CF… k6!ffg   <span style="text-decoration: underline;">2</span>016 18          <span style="color: #BB0000;">NA</span>        24</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> k6!ffg;2016-05-15;2016-05-15    GQ_CF… k6!ffg   <span style="text-decoration: underline;">2</span>016 19          <span style="color: #BB0000;">NA</span>        24</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> k6!ffg;2016-05-23;2016-05-23    GQ_CF… k6!ffg   <span style="text-decoration: underline;">2</span>016 21          <span style="color: #BB0000;">NA</span>        24</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> k6!ffg;2016-05-28;2016-05-28    GQ_CF… k6!ffg   <span style="text-decoration: underline;">2</span>016 21          <span style="color: #BB0000;">NA</span>        24</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> k6!8JJgk6;2016-05-14;2016-05-14 GQ_CF… k6!8JJ…  <span style="text-decoration: underline;">2</span>016 19          <span style="color: #BB0000;">NA</span>        24</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> k6!8JJgk6;2016-05-27;2016-05-27 GQ_CF… k6!8JJ…  <span style="text-decoration: underline;">2</span>016 21          <span style="color: #BB0000;">NA</span>        24</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> k6!8JJgk6;2016-06-05;2016-06-05 GQ_CF… k6!8JJ…  <span style="text-decoration: underline;">2</span>016 22          <span style="color: #BB0000;">NA</span>        24</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> k6gg7!2$;2014-05-31;2014-05-30  GQ_CF… k6gg7!…  <span style="text-decoration: underline;">2</span>014 22          45        24</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> k6ggJJ!7;2017-05-19;2017-05-19  GQ_CF… k6ggJJ…  <span style="text-decoration: underline;">2</span>017 20          25        24</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> k6ggJJ!7;2017-05-25;2017-05-25  GQ_CF… k6ggJJ…  <span style="text-decoration: underline;">2</span>017 21          30        24</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 32,292 more rows</span></span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">pivot1</span><span class="op">)</span> </span>
<span><span class="co">#&gt;    trip.id             fleet                 cfv.V1            year     </span></span>
<span><span class="co">#&gt;  Length:32302       Length:32302       Length:32302       Min.   :2013  </span></span>
<span><span class="co">#&gt;  Class :character   Class :character   Class :character   1st Qu.:2014  </span></span>
<span><span class="co">#&gt;  Mode  :character   Mode  :character   Mode  :character   Median :2015  </span></span>
<span><span class="co">#&gt;                                                           Mean   :2015  </span></span>
<span><span class="co">#&gt;                                                           3rd Qu.:2017  </span></span>
<span><span class="co">#&gt;                                                           Max.   :2017  </span></span>
<span><span class="co">#&gt;                                                                         </span></span>
<span><span class="co">#&gt;       sw               sum.gear       max.hours </span></span>
<span><span class="co">#&gt;  Length:32302       Min.   :  1.0   Min.   :24  </span></span>
<span><span class="co">#&gt;  Class :character   1st Qu.: 35.0   1st Qu.:24  </span></span>
<span><span class="co">#&gt;  Mode  :character   Median : 71.0   Median :24  </span></span>
<span><span class="co">#&gt;                     Mean   : 73.1   Mean   :24  </span></span>
<span><span class="co">#&gt;                     3rd Qu.:100.0   3rd Qu.:24  </span></span>
<span><span class="co">#&gt;                     Max.   :438.0   Max.   :24  </span></span>
<span><span class="co">#&gt;                     NA's   :349</span></span></code></pre></div>
<p>Now fill in the missing gear.amount with group averages.The user
needs to choose the order of variables to group by that is most
appropriate for the fishery of interest. By the end of this step, there
should be no missing gear.amount.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">pivot1</span><span class="op">$</span><span class="va">sum.gear</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">&gt;</span><span class="fl">0</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="va">pivot1</span><span class="op">&lt;-</span><span class="fu">fisheriescape</span><span class="fu">::</span><span class="fu"><a href="../reference/fs_fill_col.html">fs_fill_col</a></span><span class="op">(</span><span class="va">pivot1</span>,group.cols<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'cfv'</span>,<span class="st">'year'</span>,<span class="st">'sw'</span><span class="op">)</span>,update.col <span class="op">=</span> <span class="st">'sum.gear'</span>,fun<span class="op">=</span><span class="va">mean</span><span class="op">)</span><span class="op">}</span></span>
<span></span>
<span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">pivot1</span><span class="op">$</span><span class="va">sum.gear</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">&gt;</span><span class="fl">0</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="va">pivot1</span><span class="op">&lt;-</span><span class="fu">fisheriescape</span><span class="fu">::</span><span class="fu"><a href="../reference/fs_fill_col.html">fs_fill_col</a></span><span class="op">(</span><span class="va">pivot1</span>,group.cols<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'cfv'</span>,<span class="st">'year'</span><span class="op">)</span>,update.col <span class="op">=</span> <span class="st">'sum.gear'</span>,fun<span class="op">=</span><span class="va">mean</span><span class="op">)</span><span class="op">}</span></span>
<span></span>
<span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">pivot1</span><span class="op">$</span><span class="va">sum.gear</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">&gt;</span><span class="fl">0</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="va">pivot1</span><span class="op">&lt;-</span><span class="fu">fisheriescape</span><span class="fu">::</span><span class="fu"><a href="../reference/fs_fill_col.html">fs_fill_col</a></span><span class="op">(</span><span class="va">pivot1</span>,group.cols<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'cfv'</span><span class="op">)</span>,update.col <span class="op">=</span> <span class="st">'sum.gear'</span>,fun<span class="op">=</span><span class="va">mean</span><span class="op">)</span><span class="op">}</span></span>
<span></span>
<span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">pivot1</span><span class="op">$</span><span class="va">sum.gear</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">&gt;</span><span class="fl">0</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="va">pivot1</span><span class="op">&lt;-</span><span class="fu">fisheriescape</span><span class="fu">::</span><span class="fu"><a href="../reference/fs_fill_col.html">fs_fill_col</a></span><span class="op">(</span><span class="va">pivot1</span>,group.cols<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'year'</span>,<span class="st">'sw'</span><span class="op">)</span>,update.col <span class="op">=</span> <span class="st">'sum.gear'</span>,fun<span class="op">=</span><span class="va">mean</span><span class="op">)</span><span class="op">}</span></span>
<span></span>
<span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">pivot1</span><span class="op">$</span><span class="va">sum.gear</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">&gt;</span><span class="fl">0</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="va">pivot1</span><span class="op">&lt;-</span><span class="fu">fisheriescape</span><span class="fu">::</span><span class="fu"><a href="../reference/fs_fill_col.html">fs_fill_col</a></span><span class="op">(</span><span class="va">pivot1</span>,group.cols<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'year'</span><span class="op">)</span>,update.col <span class="op">=</span> <span class="st">'sum.gear'</span>,fun<span class="op">=</span><span class="va">mean</span><span class="op">)</span><span class="op">}</span></span>
<span></span>
<span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">pivot1</span><span class="op">$</span><span class="va">sum.gear</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">&gt;</span><span class="fl">0</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">'There are still NAs after filling gear according to current steps.'</span><span class="op">)</span><span class="op">}</span></span></code></pre></div>
<p>There are no longer NAs in gear.amount. If object pivot1 contained
NAs in hours.fished, we would repeat the above step for hours.fished.
However, we can see that there are no NAs in hours.fished.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">pivot1</span><span class="op">)</span> </span>
<span><span class="co">#&gt;    trip.id             fleet                 cfv.V1            year     </span></span>
<span><span class="co">#&gt;  Length:32302       Length:32302       Length:32302       Min.   :2013  </span></span>
<span><span class="co">#&gt;  Class :character   Class :character   Class :character   1st Qu.:2014  </span></span>
<span><span class="co">#&gt;  Mode  :character   Mode  :character   Mode  :character   Median :2015  </span></span>
<span><span class="co">#&gt;                                                           Mean   :2015  </span></span>
<span><span class="co">#&gt;                                                           3rd Qu.:2017  </span></span>
<span><span class="co">#&gt;                                                           Max.   :2017  </span></span>
<span><span class="co">#&gt;       sw               sum.gear        max.hours </span></span>
<span><span class="co">#&gt;  Length:32302       Min.   :  1.00   Min.   :24  </span></span>
<span><span class="co">#&gt;  Class :character   1st Qu.: 35.00   1st Qu.:24  </span></span>
<span><span class="co">#&gt;  Mode  :character   Median : 71.00   Median :24  </span></span>
<span><span class="co">#&gt;                     Mean   : 73.03   Mean   :24  </span></span>
<span><span class="co">#&gt;                     3rd Qu.:100.00   3rd Qu.:24  </span></span>
<span><span class="co">#&gt;                     Max.   :438.00   Max.   :24</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="pivot-2">Pivot 2<a class="anchor" aria-label="anchor" href="#pivot-2"></a>
</h3>
<p>Function <code>fs_pivot2</code> summarizes data by user-specified
groups, which must include year, standard week (sw), and either cfv or
licence, and which should typically also include fleet.</p>
<p>When trap.fishery==‘yes’, the resulting table contains the maximum
gear, maximum hours (if applicable), and mean days (if applicable).</p>
<p>When trap.fishery!=‘yes’, the resulting table contains the mean gear,
mean hours (if applicable), and mean days (if applicable).</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pivot2</span><span class="op">&lt;-</span><span class="fu"><a href="../reference/fs_pivot2.html">fs_pivot2</a></span><span class="op">(</span><span class="va">pivot1</span>,</span>
<span>                  trap.fishery<span class="op">=</span><span class="st">'yes'</span>,</span>
<span>                  group.cols<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'cfv'</span>,<span class="st">'fleet'</span>,<span class="st">'year'</span>,<span class="st">'sw'</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">pivot2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;      cfv     fleet year sw gear hours</span></span>
<span><span class="co">#&gt; 1 !2$82$ GQ_CFA_19 2013 29    8    24</span></span>
<span><span class="co">#&gt; 2 !2$82$ GQ_CFA_19 2013 30    8    24</span></span>
<span><span class="co">#&gt; 3 !2$82$ GQ_CFA_19 2014 29    8    24</span></span>
<span><span class="co">#&gt; 4 !2$82$ GQ_CFA_19 2014 30    8    24</span></span>
<span><span class="co">#&gt; 5 !2$82$ GQ_CFA_19 2014 31    8    24</span></span>
<span><span class="co">#&gt; 6 !2$82$ GQ_CFA_19 2015 29    8    24</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">pivot2</span><span class="op">)</span> </span>
<span><span class="co">#&gt;        cfv.V1          fleet                year           sw           </span></span>
<span><span class="co">#&gt;  Length:14408       Length:14408       Min.   :2013   Length:14408      </span></span>
<span><span class="co">#&gt;  Class :character   Class :character   1st Qu.:2014   Class :character  </span></span>
<span><span class="co">#&gt;  Mode  :character   Mode  :character   Median :2015   Mode  :character  </span></span>
<span><span class="co">#&gt;                                        Mean   :2015                     </span></span>
<span><span class="co">#&gt;                                        3rd Qu.:2017                     </span></span>
<span><span class="co">#&gt;                                        Max.   :2017                     </span></span>
<span><span class="co">#&gt;       gear            hours   </span></span>
<span><span class="co">#&gt;  Min.   :  1.00   Min.   :24  </span></span>
<span><span class="co">#&gt;  1st Qu.: 50.00   1st Qu.:24  </span></span>
<span><span class="co">#&gt;  Median : 75.00   Median :24  </span></span>
<span><span class="co">#&gt;  Mean   : 86.12   Mean   :24  </span></span>
<span><span class="co">#&gt;  3rd Qu.:123.25   3rd Qu.:24  </span></span>
<span><span class="co">#&gt;  Max.   :438.00   Max.   :24</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="pivot-3">Pivot 3<a class="anchor" aria-label="anchor" href="#pivot-3"></a>
</h3>
<p>Function <code>fs_pivot3</code> summarizes data by user-specified
groups, which must include year and standard week (sw), and which should
typically also include fleet. <strong>Grouping should not include either
cfv or licence.</strong> A parameter, “id.col”, needs to be specified as
either cfv or licence.</p>
<p>When trap.fishery==‘yes’, the resulting table contains the number of
distinct cfvs or licences (“n.vessels”), summed gear (“total.gear”),
maximum hours (“soak.time”, if applicable), and mean days (“days”, if
applicable).</p>
<p>When trap.fishery!=‘yes’, the resulting table contains the number of
distinct cfvs or licences (“n.vessels”), summed gear (“total.gear”),
mean hours (“soak.time”, if applicable), and mean days (“days”, if
applicable).</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pivot3</span><span class="op">&lt;-</span><span class="fu"><a href="../reference/fs_pivot3.html">fs_pivot3</a></span><span class="op">(</span><span class="va">pivot2</span>,</span>
<span>                  group.cols<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'fleet'</span>,<span class="st">'year'</span>,<span class="st">'sw'</span><span class="op">)</span>,</span>
<span>                  id.col<span class="op">=</span><span class="st">'cfv'</span>,</span>
<span>                  trap.fishery<span class="op">=</span><span class="st">'yes'</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">pivot3</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;       fleet year sw n.vessels total.gear soak.time</span></span>
<span><span class="co">#&gt; 1 GQ_CFA_12 2013 17         5        289        24</span></span>
<span><span class="co">#&gt; 2 GQ_CFA_12 2013 18       251      24551        24</span></span>
<span><span class="co">#&gt; 3 GQ_CFA_12 2013 19       240      22352        24</span></span>
<span><span class="co">#&gt; 4 GQ_CFA_12 2013 20       243      22422        24</span></span>
<span><span class="co">#&gt; 5 GQ_CFA_12 2013 21       244      24111        24</span></span>
<span><span class="co">#&gt; 6 GQ_CFA_12 2013 22       238      23771        24</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">pivot3</span><span class="op">)</span> </span>
<span><span class="co">#&gt;     fleet                year           sw              n.vessels     </span></span>
<span><span class="co">#&gt;  Length:288         Min.   :2013   Length:288         Min.   :  1.00  </span></span>
<span><span class="co">#&gt;  Class :character   1st Qu.:2014   Class :character   1st Qu.:  5.00  </span></span>
<span><span class="co">#&gt;  Mode  :character   Median :2015   Mode  :character   Median : 15.00  </span></span>
<span><span class="co">#&gt;                     Mean   :2015                      Mean   : 50.03  </span></span>
<span><span class="co">#&gt;                     3rd Qu.:2016                      3rd Qu.: 35.00  </span></span>
<span><span class="co">#&gt;                     Max.   :2017                      Max.   :312.00  </span></span>
<span><span class="co">#&gt;    total.gear      soak.time </span></span>
<span><span class="co">#&gt;  Min.   :    1   Min.   :24  </span></span>
<span><span class="co">#&gt;  1st Qu.:  266   1st Qu.:24  </span></span>
<span><span class="co">#&gt;  Median :  989   Median :24  </span></span>
<span><span class="co">#&gt;  Mean   : 4308   Mean   :24  </span></span>
<span><span class="co">#&gt;  3rd Qu.: 2690   3rd Qu.:24  </span></span>
<span><span class="co">#&gt;  Max.   :31734   Max.   :24</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="seasons-and-pivot-4">Seasons and Pivot 4<a class="anchor" aria-label="anchor" href="#seasons-and-pivot-4"></a>
</h3>
<p>The function <code>fs_pivot4</code> is a little different from the
previous pivot functions, as it performs a number of steps. It does not
yet have a lot of flexibility, and needs to be used with caution. Don’t
use this function for fisheries that need information to be summarized
by province in addition to by fleet.</p>
<p><strong>need to describe what function does, and resulting
output</strong></p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pivot4</span><span class="op">&lt;-</span><span class="fu"><a href="../reference/fs_pivot4.html">fs_pivot4</a></span><span class="op">(</span>df<span class="op">=</span><span class="va">df2</span>,</span>
<span>                  trap.fishery<span class="op">=</span><span class="st">'yes'</span>,</span>
<span>          <span class="va">pivot3</span>, <span class="co">#output from fs_pivot3</span></span>
<span>          fleet.col<span class="op">=</span><span class="st">'fleet'</span>, <span class="co">#should match between df and pivot3</span></span>
<span>          prov.col<span class="op">=</span><span class="cn">NULL</span>,</span>
<span>          area.note.col<span class="op">=</span><span class="cn">NULL</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">pivot4</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;       fleet year sw n.vessels total.gear soak.time prop.week.fished</span></span>
<span><span class="co">#&gt; 1 GQ_CFA_12 2013 17         5        289        24        0.2857143</span></span>
<span><span class="co">#&gt; 2 GQ_CFA_12 2013 18       251      24551        24        1.0000000</span></span>
<span><span class="co">#&gt; 3 GQ_CFA_12 2013 19       240      22352        24        1.0000000</span></span>
<span><span class="co">#&gt; 4 GQ_CFA_12 2013 20       243      22422        24        1.0000000</span></span>
<span><span class="co">#&gt; 5 GQ_CFA_12 2013 21       244      24111        24        1.0000000</span></span>
<span><span class="co">#&gt; 6 GQ_CFA_12 2013 22       238      23771        24        1.0000000</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">pivot4</span><span class="op">)</span> </span>
<span><span class="co">#&gt;     fleet                year           sw              n.vessels     </span></span>
<span><span class="co">#&gt;  Length:288         Min.   :2013   Length:288         Min.   :  1.00  </span></span>
<span><span class="co">#&gt;  Class :character   1st Qu.:2014   Class :character   1st Qu.:  5.00  </span></span>
<span><span class="co">#&gt;  Mode  :character   Median :2015   Mode  :character   Median : 15.00  </span></span>
<span><span class="co">#&gt;                     Mean   :2015                      Mean   : 50.03  </span></span>
<span><span class="co">#&gt;                     3rd Qu.:2016                      3rd Qu.: 35.00  </span></span>
<span><span class="co">#&gt;                     Max.   :2017                      Max.   :312.00  </span></span>
<span><span class="co">#&gt;    total.gear      soak.time  prop.week.fished</span></span>
<span><span class="co">#&gt;  Min.   :    1   Min.   :24   Min.   :0.1429  </span></span>
<span><span class="co">#&gt;  1st Qu.:  266   1st Qu.:24   1st Qu.:1.0000  </span></span>
<span><span class="co">#&gt;  Median :  989   Median :24   Median :1.0000  </span></span>
<span><span class="co">#&gt;  Mean   : 4308   Mean   :24   Mean   :0.9201  </span></span>
<span><span class="co">#&gt;  3rd Qu.: 2690   3rd Qu.:24   3rd Qu.:1.0000  </span></span>
<span><span class="co">#&gt;  Max.   :31734   Max.   :24   Max.   :1.0000</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="common-effort-usage-ceu">Common effort usage (CEU)<a class="anchor" aria-label="anchor" href="#common-effort-usage-ceu"></a>
</h2>
<p>For most fisheries, use function <code>fs_calc_ceu</code> and follow
the prompts. This function cannot yet be applied to American lobster,
NAFO 4T.</p>
<p><strong>need to describe what function does for each fishery, and
resulting output</strong></p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ceu</span><span class="op">&lt;-</span><span class="fu"><a href="../reference/fs_calc_ceu.html">fs_calc_ceu</a></span><span class="op">(</span><span class="va">pivot4</span><span class="op">)</span></span></code></pre></div>
<p>To simplify things for this vignette, we will use a pre-made CEU
file.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ceu</span><span class="op">&lt;-</span><span class="va">ceu</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">ceu</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 3</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Groups:   fleet [1]</span></span></span>
<span><span class="co">#&gt;   fleet     sw     av.ceu</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> GQ_CFA_12 14        5.6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> GQ_CFA_12 15       14.4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> GQ_CFA_12 16     <span style="text-decoration: underline;">3</span>115. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> GQ_CFA_12 17     <span style="text-decoration: underline;">9</span>688. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> GQ_CFA_12 18    <span style="text-decoration: underline;">15</span>934. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> GQ_CFA_12 19    <span style="text-decoration: underline;">19</span>271.</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="fisheriescape">Fisheriescape<a class="anchor" aria-label="anchor" href="#fisheriescape"></a>
</h2>
<div class="section level3">
<h3 id="join-site-score-with-ceu-and-calculate-fisheriescape">Join site score with CEU and calculate fisheriescape<a class="anchor" aria-label="anchor" href="#join-site-score-with-ceu-and-calculate-fisheriescape"></a>
</h3>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span><span class="op">&lt;-</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">ss</span>,<span class="va">ceu</span><span class="op">)</span></span>
<span></span>
<span><span class="va">df</span><span class="op">$</span><span class="va">fs</span><span class="op">&lt;-</span><span class="va">df</span><span class="op">$</span><span class="va">site.score</span><span class="op">*</span><span class="va">df</span><span class="op">$</span><span class="va">av.ceu</span> </span>
<span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 10</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Groups:   fleet, sw [4]</span></span></span>
<span><span class="co">#&gt;   GRID_ID  sw    tot.count.hex av.count.hex fleet     sum.av.count.fleet</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> ATY-1159 19                1          0.2 GQ_CFA_17              100  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> ATY-1159 20                2          0.4 GQ_CFA_17               88.4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> ATY-1159 21                2          0.4 GQ_CFA_17               70.4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> ATY-1160 18                1          0.2 GQ_CFA_17              108. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> ATY-1160 20                2          0.4 GQ_CFA_17               88.4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> ATY-1160 21                2          0.4 GQ_CFA_17               70.4</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 4 more variables: prop.count.fleet &lt;dbl&gt;, site.score &lt;dbl&gt;, av.ceu &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   fs &lt;dbl&gt;</span></span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span> <span class="co"># a small number of missing fs or av.ceu are expected</span></span>
<span><span class="co">#&gt;    GRID_ID               sw            tot.count.hex     av.count.hex    </span></span>
<span><span class="co">#&gt;  Length:16085       Length:16085       Min.   : 1.000   Min.   : 0.2000  </span></span>
<span><span class="co">#&gt;  Class :character   Class :character   1st Qu.: 1.000   1st Qu.: 0.2000  </span></span>
<span><span class="co">#&gt;  Mode  :character   Mode  :character   Median : 2.000   Median : 0.4000  </span></span>
<span><span class="co">#&gt;                                        Mean   : 2.435   Mean   : 0.4869  </span></span>
<span><span class="co">#&gt;                                        3rd Qu.: 3.000   3rd Qu.: 0.6000  </span></span>
<span><span class="co">#&gt;                                        Max.   :58.000   Max.   :11.6000  </span></span>
<span><span class="co">#&gt;                                                                          </span></span>
<span><span class="co">#&gt;     fleet           sum.av.count.fleet prop.count.fleet      site.score       </span></span>
<span><span class="co">#&gt;  Length:16085       Min.   :  0.2      Min.   :0.0003009   Min.   :0.0003009  </span></span>
<span><span class="co">#&gt;  Class :character   1st Qu.:141.0      1st Qu.:0.0006019   1st Qu.:0.0006019  </span></span>
<span><span class="co">#&gt;  Mode  :character   Median :454.0      Median :0.0011705   Median :0.0011705  </span></span>
<span><span class="co">#&gt;                     Mean   :374.7      Mean   :0.0055953   Mean   :0.0055953  </span></span>
<span><span class="co">#&gt;                     3rd Qu.:512.6      3rd Qu.:0.0027364   3rd Qu.:0.0027364  </span></span>
<span><span class="co">#&gt;                     Max.   :664.6      Max.   :1.0000000   Max.   :1.0000000  </span></span>
<span><span class="co">#&gt;                                                                               </span></span>
<span><span class="co">#&gt;      av.ceu                fs          </span></span>
<span><span class="co">#&gt;  Min.   :1.143e-01   Min.   :  0.1143  </span></span>
<span><span class="co">#&gt;  1st Qu.:2.938e+03   1st Qu.:  7.5413  </span></span>
<span><span class="co">#&gt;  Median :1.593e+04   Median :  9.1276  </span></span>
<span><span class="co">#&gt;  Mean   :1.405e+04   Mean   : 15.3383  </span></span>
<span><span class="co">#&gt;  3rd Qu.:2.204e+04   3rd Qu.: 18.2553  </span></span>
<span><span class="co">#&gt;  Max.   :2.506e+04   Max.   :143.2850  </span></span>
<span><span class="co">#&gt;  NA's   :26          NA's   :26</span></span>
<span></span>
<span></span>
<span><span class="co">#Checks</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/tapply.html" class="external-link">tapply</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">fs</span>,<span class="va">df</span><span class="op">$</span><span class="va">fleet</span>,<span class="va">summary</span><span class="op">)</span></span>
<span><span class="co">#&gt; $GQ_CFA_12</span></span>
<span><span class="co">#&gt;     Min.  1st Qu.   Median     Mean  3rd Qu.     Max. </span></span>
<span><span class="co">#&gt;   0.4143   8.1690   9.9722  16.9195  21.3870 143.2850 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $GQ_CFA_12A</span></span>
<span><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></span>
<span><span class="co">#&gt;   1.971   4.865   5.948  10.290  13.778  60.982 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $GQ_CFA_12E</span></span>
<span><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's </span></span>
<span><span class="co">#&gt;    5.80   15.60   17.30   17.71   19.67   34.80       1 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $GQ_CFA_12F</span></span>
<span><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></span>
<span><span class="co">#&gt;   4.146   6.551  10.681  13.903  17.337  62.720 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $GQ_CFA_17</span></span>
<span><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></span>
<span><span class="co">#&gt;   3.463   4.810   9.104  12.020  14.886  76.920 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $GQ_CFA_19</span></span>
<span><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's </span></span>
<span><span class="co">#&gt;  0.1143  1.4726  2.9786  5.2980  6.7017 43.1890      25</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="plot">Plot<a class="anchor" aria-label="anchor" href="#plot"></a>
</h3>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">hex</span><span class="op">&lt;-</span><span class="va">grid</span></span>
<span><span class="va">naf</span><span class="op">&lt;-</span><span class="fu"><a href="https://jolenesutton.github.io/gslSpatial/reference/get_shapefile.html" class="external-link">get_shapefile</a></span><span class="op">(</span><span class="st">'nafo.clipped'</span><span class="op">)</span></span>
<span><span class="co">#&gt; Source: https://www.nafo.int</span></span>
<span><span class="va">naf</span><span class="op">&lt;-</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/project.html" class="external-link">project</a></span><span class="op">(</span><span class="va">naf</span>,<span class="va">fa.poly</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">naf</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">&lt;-</span><span class="st">'nafo'</span></span>
<span></span>
<span><span class="co">#fa.poly&lt;-gslSpatial::assign_polygons(fa.poly[,'fleet'],naf[,'nafo'])</span></span>
<span><span class="co">#fa.poly&lt;-fa.poly[which(fa.poly$nafo=='4T'),]</span></span>
<span></span>
<span><span class="va">coast</span><span class="op">&lt;-</span><span class="fu">gslSpatial</span><span class="fu">::</span><span class="fu"><a href="https://jolenesutton.github.io/gslSpatial/reference/get_shapefile.html" class="external-link">get_shapefile</a></span><span class="op">(</span><span class="st">'coastline'</span><span class="op">)</span></span>
<span><span class="va">coast</span><span class="op">&lt;-</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/project.html" class="external-link">project</a></span><span class="op">(</span><span class="va">coast</span>,<span class="va">fa.poly</span><span class="op">)</span></span>
<span></span>
<span><span class="va">WEEKS</span><span class="op">&lt;-</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/sort.html" class="external-link">sort</a></span><span class="op">(</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">sw</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">fig.save</span><span class="op">=</span><span class="st">'no'</span>  <span class="co"># option to save file to specified path. If not 'yes', the figures will not be save and will only appear in the graphics window. If 'yes', the figures will be saved to the specified path, but will not be printed in the graphics window.</span></span>
<span><span class="va">path.results</span><span class="op">&lt;-</span><span class="st">'....'</span> <span class="co">#path to store figures if fig.save=='yes'</span></span>
<span></span>
<span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">WEEKS</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="va">dat</span><span class="op">&lt;-</span><span class="va">df</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">sw</span><span class="op">==</span><span class="va">WEEKS</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span>,<span class="op">]</span></span>
<span>  <span class="va">index</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">dat</span><span class="op">$</span><span class="va">fs</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">index</span><span class="op">)</span><span class="op">&gt;</span><span class="fl">0</span><span class="op">)</span><span class="op">{</span><span class="va">dat</span><span class="op">&lt;-</span><span class="va">dat</span><span class="op">[</span><span class="op">-</span><span class="va">index</span>,<span class="op">]</span><span class="op">}</span></span>
<span>  </span>
<span>  <span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/dimensions.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span><span class="op">&gt;</span><span class="fl">0</span><span class="op">)</span><span class="op">{</span></span>
<span>    <span class="va">hex.out</span><span class="op">&lt;-</span><span class="va">hex</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">hex</span><span class="op">$</span><span class="va">GRID_ID</span><span class="op"><a href="https://rspatial.github.io/terra/reference/match.html" class="external-link">%in%</a></span><span class="fu"><a href="https://rspatial.github.io/terra/reference/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">dat</span><span class="op">$</span><span class="va">GRID_ID</span><span class="op">)</span><span class="op">)</span>,<span class="op">]</span></span>
<span>    <span class="va">hex.out</span><span class="op">&lt;-</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/merge.html" class="external-link">merge</a></span><span class="op">(</span><span class="va">hex.out</span>,<span class="va">dat</span><span class="op">)</span></span>
<span>    </span>
<span>    <span class="va">pl</span><span class="op">&lt;-</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span></span>
<span>      <span class="fu"><a href="https://dieghernan.github.io/tidyterra/reference/ggspatvector.html" class="external-link">geom_spatvector</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">fa.poly</span>,fill<span class="op">=</span><span class="st">'white'</span><span class="op">)</span><span class="op">+</span></span>
<span>          <span class="fu"><a href="https://dieghernan.github.io/tidyterra/reference/ggspatvector.html" class="external-link">geom_spatvector</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">coast</span>,fill<span class="op">=</span><span class="st">'grey'</span><span class="op">)</span><span class="op">+</span></span>
<span>      <span class="fu"><a href="https://dieghernan.github.io/tidyterra/reference/ggspatvector.html" class="external-link">geom_spatvector</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">hex.out</span>,<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>fill<span class="op">=</span><span class="va">fs</span><span class="op">)</span>,col<span class="op">=</span><span class="cn">NA</span><span class="op">)</span><span class="op">+</span></span>
<span>      <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_fill_viridis_c</a></span><span class="op">(</span>direction<span class="op">=</span><span class="fl">1</span>,</span>
<span>                           option<span class="op">=</span><span class="st">'turbo'</span>,</span>
<span>                           name<span class="op">=</span><span class="st">"Fisheriescape"</span>,</span>
<span>                           limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">fs</span>,na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">fs</span>,na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>      <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">coord_sf</a></span><span class="op">(</span>crs<span class="op">=</span><span class="st">'epsg:4269'</span>,datum<span class="op">=</span><span class="st">'epsg:4269'</span>,xlim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">69</span>,<span class="op">-</span><span class="fl">60</span><span class="op">)</span>,ylim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">45.5</span>,<span class="fl">49.75</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>      <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ggtitle</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">'SW_'</span>,<span class="va">WEEKS</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>      <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>panel.grid.major <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span>, </span>
<span>            panel.grid.minor <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span>    </span>
<span>   <span class="kw">if</span><span class="op">(</span><span class="va">fig.save</span><span class="op">==</span><span class="st">'no'</span><span class="op">)</span><span class="op">{</span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">pl</span><span class="op">)</span><span class="op">}</span><span class="kw">else</span><span class="op">{</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsave.html" class="external-link">ggsave</a></span><span class="op">(</span><span class="va">pl</span>, </span>
<span>                          file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">path.results</span>,<span class="st">'FS_SW'</span>, <span class="va">WEEKS</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>, <span class="st">'.jpg'</span>, sep <span class="op">=</span> <span class="st">''</span><span class="op">)</span>, </span>
<span>                          units <span class="op">=</span> <span class="st">'in'</span>, dpi <span class="op">=</span> <span class="fl">600</span>,height<span class="op">=</span><span class="fl">4</span>,width<span class="op">=</span><span class="fl">6</span><span class="op">)</span><span class="op">}</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p><img src="fisheriescape_vignette_files/figure-html/unnamed-chunk-15-1.png" width="700"><img src="fisheriescape_vignette_files/figure-html/unnamed-chunk-15-2.png" width="700"><img src="fisheriescape_vignette_files/figure-html/unnamed-chunk-15-3.png" width="700"><img src="fisheriescape_vignette_files/figure-html/unnamed-chunk-15-4.png" width="700"><img src="fisheriescape_vignette_files/figure-html/unnamed-chunk-15-5.png" width="700"><img src="fisheriescape_vignette_files/figure-html/unnamed-chunk-15-6.png" width="700"><img src="fisheriescape_vignette_files/figure-html/unnamed-chunk-15-7.png" width="700"><img src="fisheriescape_vignette_files/figure-html/unnamed-chunk-15-8.png" width="700"><img src="fisheriescape_vignette_files/figure-html/unnamed-chunk-15-9.png" width="700"><img src="fisheriescape_vignette_files/figure-html/unnamed-chunk-15-10.png" width="700"><img src="fisheriescape_vignette_files/figure-html/unnamed-chunk-15-11.png" width="700"><img src="fisheriescape_vignette_files/figure-html/unnamed-chunk-15-12.png" width="700"><img src="fisheriescape_vignette_files/figure-html/unnamed-chunk-15-13.png" width="700"><img src="fisheriescape_vignette_files/figure-html/unnamed-chunk-15-14.png" width="700"><img src="fisheriescape_vignette_files/figure-html/unnamed-chunk-15-15.png" width="700"><img src="fisheriescape_vignette_files/figure-html/unnamed-chunk-15-16.png" width="700"><img src="fisheriescape_vignette_files/figure-html/unnamed-chunk-15-17.png" width="700"><img src="fisheriescape_vignette_files/figure-html/unnamed-chunk-15-18.png" width="700"><img src="fisheriescape_vignette_files/figure-html/unnamed-chunk-15-19.png" width="700"><img src="fisheriescape_vignette_files/figure-html/unnamed-chunk-15-20.png" width="700"><img src="fisheriescape_vignette_files/figure-html/unnamed-chunk-15-21.png" width="700"><img src="fisheriescape_vignette_files/figure-html/unnamed-chunk-15-22.png" width="700"><img src="fisheriescape_vignette_files/figure-html/unnamed-chunk-15-23.png" width="700"><img src="fisheriescape_vignette_files/figure-html/unnamed-chunk-15-24.png" width="700"></p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jolene T. Sutton.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
